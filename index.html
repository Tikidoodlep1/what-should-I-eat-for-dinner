<!DOCTYPE html>

<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>What Should I Eat For Dinner</title>
	<!-- <link rel="stylesheet" href="css/main.css" /> -->
	<style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #suggestions {
            border: 1px solid #ccc;
            max-height: 150px;
            overflow-y: auto;
            display: none;
            position: absolute;
            background: white;
            z-index: 1000;
        }
        .suggestion {
            padding: 10px;
            cursor: pointer;
        }
        .suggestion:hover {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
	<!-- NAV BANNER -->
	<header>
		<nav>
			<div class="banner">
				<h1 id="title">What Should I Eat For Dinner</h1>
				<p id="description1"> The following application is to be used to figure out what someone should make for dinner! <br> <br>
				Either search which ingredients you have in your home, or for an ingredient of interest to narrow recipes: <br> <br> </p>
			</div>
		</nav>
	</header>
	<main>
		<div id="page">
			<h2>Your Ingredients List: </h2>
			<h2>Total Items: <span id="counter">0</span></h2>
			<ul id="list">
			  <!-- <li>fresh figs <a href="#" class="delete">Delete This Item</a></li> -->
			</ul>
			<div class="button"><a href="#" id="add" class="add"></a></div> <!-- Add button without text -->
		  </div>
          <script src="js/ingredients.js"></script>
		  <script src="js/grocery.js"></script>
	</main>

	<!-- Test for search -->
	<br>
	<div>Search for an ingredient: <br> <br> </div>
	<input type="text" id="search" placeholder="Type here!" autocomplete="off">
    <div id="suggestions"></div>
	
    <div>
        <p>
            <button onclick="addNewIngredient(document.getElementById('search').value)" id="addButton">
                Add Ingredient
            </button>
            <button onclick="generateRecipes('Recipes: ', 'No ingredients were selected. Showing all recipes: ');" id="generateButton">
                Generate Recipes
            </button>
        </p>
    </div>
    
    <div>
        <p>Try searching for recipes by a dish element: </p>
        <div>
            <button onclick="generateRecipes('Beef Recipes', 'Here are recipes involving beef: ');" style="padding: 10px 20px; font-size: 16px;">
                Beef
            </button>
            <button onclick="generateRecipes('Chicken Recipes', 'Here are recipes involving chicken: ');" style="padding: 10px 20px; font-size: 16px;">
                Chicken
            </button>
            <button onclick="generateRecipes('Fruit Recipes', 'Here are recipes involving fruit: ');" style="padding: 10px 20px; font-size: 16px;">
                Fruit
            </button>
            <br>
            <button onclick="generateRecipes('Vegetable Recipes', 'Here are recipes involving vegetables: ');" style="padding: 10px 20px; font-size: 16px;">
                Vegetables
            </button>
            <button onclick="generateRecipes('Noodle Recipes', 'Here are recipes involving noodles: ');" style="padding: 10px 20px; font-size: 16px;">
                Noodles
            </button>
        </div>
    </div>
    
    <script>
        function generateRecipes(title, description) {
            console.log("Generate Recipes called");
            const ingredientsParam = selectedIngredients.map(ingredient => `ingredient[]=${encodeURIComponent(ingredient)}`).join('&');
            const titleParam = `title=${encodeURIComponent(title)}`;
            const descriptionParam = `description=${encodeURIComponent(description)}`;
            window.location.href = `./showRecipes.php?${ingredientsParam}&${titleParam}&${descriptionParam}`;
            //fetch("showRecipes.php", {method: "POST", body: "<ingredientsParam>"});
        }
    </script>
    
    <!-- 
    <script>

            window.selectedIngredients = [];

            const ingredients = [
                "Apple", "Banana", "Carrot", "Date", "Eggplant", 
                "Fig", "Grape", "Honey", "Icing", "JalapeÃ±o", 
                "Kale", "Lemon", "Mango", "Nectarine", "Olive", 
                "Pepper", "Quinoa", "Radish", "Spinach", "Tomato", 
                "Uva", "Vanilla", "Watermelon", "Zucchini", "Avocado"
            ];

            const searchInput = document.getElementById('search');
            const suggestionsBox = document.getElementById('suggestions');

            searchInput.addEventListener('input', () => {
                suggestionsBox.innerHTML = '';
                const inputValue = searchInput.value;

                if (inputValue) {
                    const suggestions = ingredients.filter(ingredient =>
                        ingredient.toLowerCase().startsWith(inputValue.toLowerCase()) // search by letters input by the user
                    );

                    suggestions.forEach(ingredient => { // filter through the ingredients list
                        const suggestionItem = document.createElement('div');
                        suggestionItem.textContent = ingredient;
                        suggestionItem.classList.add('suggestion');
                        suggestionItem.addEventListener('click', () => { // after clicking a suggestion...

                            // Don't allow the user to add the same ingredient
                            if (selectedIngredients.includes(ingredient)) {
                                alert(`${ingredient} is already added!`);
                            } else {
                                console.log(`Adding ingredient: ${ingredient}`);
                                addNewIngredient(ingredient); // call to add the ingredient to the list
                                selectedIngredients.push(ingredient); // add the ingredient to the array
                                console.log('Ingredients: ' + selectedIngredients);

                                // Update the button URL with selected ingredients
                                const ingredientsParam = selectedIngredients.map(ing => `ingredient[]=${encodeURIComponent(ing)}`).join('&');
                                const generateButton = document.getElementById('generateButton');
                                generateButton.setAttribute('onclick', `window.location.href='./showRecipes.php?${ingredientsParam}'`);

                                searchInput.value = ''; // clear the search input after clicking an ingredient 
                                suggestionsBox.innerHTML = ''; // clear suggestions
                            }
                        });
                        suggestionsBox.appendChild(suggestionItem); // continue to display the suggestions until clicked/input doesn't match
                    });
                    suggestionsBox.style.display = suggestions.length > 0 ? 'block' : 'none'; // show or hide suggestions
                } else {
                suggestionsBox.style.display = 'none'; // hide suggestions if input is empty
                }
            });
        // hide suggestions when clicking outside of the box's boundaries
        document.addEventListener('click', (event) => {
            if (!searchInput.contains(event.target) && !suggestionsBox.contains(event.target)) {
                suggestionsBox.style.display = 'none';
            }
        });
    </script>
    -->

</body>
</body>
</html>
